(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{Vxom:function(t,e,i){"use strict";i.r(e),i.d(e,"SubscribeListModule",(function(){return k}));var r=i("ofXK"),s=i("tyNb"),n=i("zzOR"),b=i("3Pt+"),o=i("Lw2Y"),c=i("fXoL"),a=i("c8VH"),d=i("AytR"),u=i("tk/3");let l=(()=>{class t{constructor(t){this.http=t,this.API_URL=d.a.APIEndpoint}getSubscribeList(t){return this.http.get(this.API_URL+"/subscribe",{params:t})}addSubscribe(t){return this.http.post(this.API_URL+"/subscribe",t)}editSubscribe(t,e){return this.http.put(`${this.API_URL}/subscribe/${t}`,e)}deleteSubscribe(t){return this.http.delete(`${this.API_URL}/subscribe/${t}`)}getSubscribeById(t,e=null){return this.http.get(`${this.API_URL}/subscribe/${t}`,{params:e})}}return t.\u0275fac=function(e){return new(e||t)(c.Tb(u.b))},t.\u0275prov=c.Fb({token:t,factory:t.\u0275fac}),t})();var h=i("AwSQ"),m=i("Chay"),f=i("33RK");function p(t,e){1&t&&c.Kb(0,"i",34)}function g(t,e){1&t&&c.Kb(0,"i",35)}function P(t,e){if(1&t){const t=c.Qb();c.Pb(0,"tr"),c.Pb(1,"td",24),c.Pb(2,"form",25),c.Xb("ngSubmit",(function(){return c.nc(t),c.Zb().submitForm()})),c.Pb(3,"div",26),c.Pb(4,"div",27),c.Kb(5,"input",28),c.Ob(),c.Pb(6,"div"),c.Pb(7,"button",29),c.tc(8,p,1,0,"i",30),c.tc(9,g,1,0,"i",31),c.Ob(),c.Pb(10,"button",32),c.Xb("click",(function(){return c.nc(t),c.Zb().resetForm()})),c.Kb(11,"i",33),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()}if(2&t){const t=c.Zb();c.zb(2),c.ec("formGroup",t.addForm),c.zb(3),c.ec("formControl",t.addForm.controls.email),c.zb(2),c.ec("disabled",t.showLoader),c.zb(1),c.ec("ngIf",!t.showLoader),c.zb(1),c.ec("ngIf",t.showLoader)}}function O(t,e){if(1&t){const t=c.Qb();c.Nb(0),c.Pb(1,"td"),c.vc(2),c.Ob(),c.Pb(3,"td",20),c.Pb(4,"div",36),c.Pb(5,"button",37),c.Kb(6,"i",38),c.Ob(),c.Pb(7,"div",39),c.Pb(8,"a",40),c.Xb("click",(function(){c.nc(t);const e=c.Zb(),i=e.$implicit,r=e.index;return c.Zb().editObject(i,r)})),c.Kb(9,"i",41),c.vc(10," Edit"),c.Ob(),c.Pb(11,"a",40),c.Xb("click",(function(){c.nc(t);const e=c.Zb().$implicit;return c.Zb().deleteObject(e)})),c.Kb(12,"i",42),c.vc(13," Delete"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Mb()}if(2&t){const t=c.Zb().$implicit;c.zb(2),c.wc(null==t?null:t.email)}}function v(t,e){1&t&&c.Kb(0,"i",34)}function w(t,e){1&t&&c.Kb(0,"i",35)}function y(t,e){if(1&t){const t=c.Qb();c.Nb(0),c.Pb(1,"td",24),c.Pb(2,"form",25),c.Xb("ngSubmit",(function(){return c.nc(t),c.Zb(2).submitForm()})),c.Pb(3,"div",26),c.Pb(4,"div",27),c.Kb(5,"input",28),c.Ob(),c.Pb(6,"div"),c.Pb(7,"button",29),c.tc(8,v,1,0,"i",30),c.tc(9,w,1,0,"i",31),c.Ob(),c.Pb(10,"button",32),c.Xb("click",(function(){return c.nc(t),c.Zb(2).resetForm()})),c.Kb(11,"i",33),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Mb()}if(2&t){const t=c.Zb(2);c.zb(2),c.ec("formGroup",t.addForm),c.zb(3),c.ec("formControl",t.addForm.controls.email),c.zb(2),c.ec("disabled",t.showLoader),c.zb(1),c.ec("ngIf",!t.showLoader),c.zb(1),c.ec("ngIf",t.showLoader)}}function F(t,e){if(1&t&&(c.Pb(0,"tr"),c.tc(1,O,14,1,"ng-container",21),c.tc(2,y,12,5,"ng-container",21),c.Ob()),2&t){const t=e.$implicit,i=e.index,r=c.Zb();c.zb(1),c.ec("ngIf",r.editId!=(null==t?null:t.id)),c.zb(1),c.ec("ngIf",r.isEditing&&r.editId==(null==t?null:t.id)&&i==r.editIndex)}}function I(t,e){1&t&&(c.Pb(0,"tr"),c.Pb(1,"td",24),c.vc(2," No records found"),c.Ob(),c.Ob())}const x=function(){return["/dashboard"]};let L=(()=>{class t{constructor(t,e,i,r,s){this.router=t,this.paginationService=e,this.subscribeservice=i,this.dataService=r,this.fBuilder=s,this.loadingState=!0,this.objectArray=[],this.questionArray=[],this.pagination=null,this.searchText=null,this.currentPage=1,this.formErrors={apierror:null},this.showLoader=!1,this.showAddForm=!1,this.isEditing=!1,this.editId=null,this.editIndex=null,this.loadform=!1,this.permissionObject=null,this.addForm=this.fBuilder.group({email:[null,b.p.compose([b.p.required,b.p.email])]})}ngOnInit(){this.subscription=this.dataService.searchTextSubject.subscribe(t=>{this.searchText=t,this.getObjects()})}getObjects(){const t={page:this.currentPage};this.searchText&&(t.search=this.searchText),this.subscribeservice.getSubscribeList(t).subscribe(t=>{this.loadingState=!1,t.success?(this.objectArray=t.data.data,this.pagination=this.paginationService.getPager(t.data.pagination.total_page,this.currentPage)):(this.objectArray=[],this.pagination=null)},t=>{this.loadingState=!1,this.objectArray=[],this.pagination=null})}getPage(t){this.currentPage=t,this.getObjects()}searchObject(t){this.searchText=t,this.currentPage=1,this.getObjects()}deleteObject(t){swal.fire({title:n.a.delete_header_text,text:n.a.delete_smalll_text,icon:n.a.delete_dialogue_type,showCancelButton:!0,confirmButtonText:n.a.delete_confirm_button,cancelButtonText:n.a.delete_cancel_button}).then(e=>{e.value&&this.subscribeservice.deleteSubscribe(t.id).subscribe(t=>{t.success&&this.getObjects()})}).catch(swal.noop)}editObject(t,e){this.resetForm(),this.editIndex=e,this.isEditing=!0,this.editId=t.id,this.addForm.patchValue({email:t.email})}showForm(){this.resetForm(),this.showAddForm=!0}resetForm(){this.showAddForm=!1,this.isEditing=!1,this.editId=null,o.a.resetForm(this.addForm,this.formErrors)}submitForm(){if(this.addForm.valid){this.showLoader=!0;const t={email:this.addForm.value.email};this.isEditing?this.subscribeservice.editSubscribe(this.editId,t).subscribe(t=>{this.showLoader=!1,t.success?(this.getObjects(),this.resetForm()):t.error.map(e=>{e.hasOwnProperty("email")?this.formErrors.email=e.email:this.formErrors.apierror="* "+t.error})},t=>{console.log("In error",t),this.formErrors.apierror="* "+t.error,this.showLoader=!1}):this.subscribeservice.addSubscribe(t).subscribe(t=>{this.showLoader=!1,t.success?(this.resetForm(),this.getObjects()):t.error.map(e=>{e.hasOwnProperty("email")?this.formErrors.email=e.email:this.formErrors.apierror="* "+t.error})},t=>{console.log("In error",t),this.formErrors.apierror="* "+t.error,this.showLoader=!1})}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(s.e),c.Jb(a.a),c.Jb(l),c.Jb(h.a),c.Jb(b.c))},t.\u0275cmp=c.Db({type:t,selectors:[["app-subscribe-list"]],decls:35,vars:8,consts:[[3,"show"],[1,"page-breadcrumb"],[1,"row"],[1,"col-7","align-self-center"],[1,"page-title","text-truncate","text-dark","font-weight-medium","mb-1"],[1,"d-flex","align-items-center"],["aria-label","breadcrumb"],[1,"breadcrumb","m-0","p-0"],[1,"breadcrumb-item"],["routerLinkActive","router-link-active",1,"text-muted",3,"routerLink"],["aria-current","page",1,"breadcrumb-item","text-muted","active"],[1,"col-5","align-self-center"],[1,"customize-input","float-right"],["type","button",1,"btn","btn-outline-info","border-0","custom-shadow","custom-radius",3,"click"],[1,"content"],[1,"page-content","container-fluid"],[1,"card","strache-card"],[1,"card-body","p-0"],[1,"table-responsive"],[1,"table","table-hover","m-0"],[1,"table-field-actions","text-center"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"paginationList","currentPage","onPageChange"],["colspan","2"],[3,"formGroup","ngSubmit"],[1,"d-flex"],[1,"form-group","mb-0","flex-grow-1","pr-2"],["type","text","placeholder","Enter Email...",1,"form-control",3,"formControl"],["type","submit",1,"btn","btn-outline-success","btn-rounded","btn-circle","mr-2",3,"disabled"],["class","fas fa-check",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],["type","button",1,"btn","btn-outline-secondary","btn-rounded","btn-circle","mr-2",3,"click"],[1,"fas","fa-times"],[1,"fas","fa-check"],[1,"fa","fa-spinner","fa-spin"],[1,"action-drop","dropdown"],["role","button","type","button","data-toggle","dropdown",1,"btn","btn-link","text-primary","p-0","px-2","btn-sm","btn-icon-only"],[1,"fa","fa-ellipsis-h"],[1,"dropdown-menu","dropdown-icon-menu","dropdown-menu-right"],[1,"dropdown-item",3,"click"],[1,"fa","fa-edit","fa-fw","text-primary"],[1,"fa","fa-trash","fa-fw","text-primary"]],template:function(t,e){1&t&&(c.Kb(0,"loder",0),c.Pb(1,"div",1),c.Pb(2,"div",2),c.Pb(3,"div",3),c.Pb(4,"h4",4),c.vc(5,"Subscribe"),c.Ob(),c.Pb(6,"div",5),c.Pb(7,"nav",6),c.Pb(8,"ol",7),c.Pb(9,"li",8),c.Pb(10,"a",9),c.vc(11,"Apps"),c.Ob(),c.Ob(),c.Pb(12,"li",10),c.vc(13,"Subscribe List"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(14,"div",11),c.Pb(15,"div",12),c.Pb(16,"button",13),c.Xb("click",(function(){return e.showForm()})),c.vc(17,"Add Subscribe"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(18,"div",14),c.Pb(19,"section",15),c.Pb(20,"div",16),c.Pb(21,"div",17),c.Pb(22,"div",18),c.Pb(23,"table",19),c.Pb(24,"thead"),c.Pb(25,"tr"),c.Pb(26,"th"),c.vc(27,"Email"),c.Ob(),c.Pb(28,"th",20),c.vc(29,"Action"),c.Ob(),c.Ob(),c.Ob(),c.Pb(30,"tbody"),c.tc(31,P,12,5,"tr",21),c.tc(32,F,3,2,"tr",22),c.tc(33,I,3,0,"tr",21),c.Ob(),c.Ob(),c.Ob(),c.Pb(34,"pagination",23),c.Xb("onPageChange",(function(t){return e.getPage(t)})),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.ec("show",e.loadingState),c.zb(10),c.ec("routerLink",c.gc(7,x)),c.zb(21),c.ec("ngIf",e.showAddForm&&!e.isEditing),c.zb(1),c.ec("ngForOf",e.objectArray),c.zb(1),c.ec("ngIf",0===e.objectArray.length&&!e.showAddForm),c.zb(1),c.ec("paginationList",e.pagination)("currentPage",e.currentPage))},directives:[m.a,s.h,s.g,r.k,r.j,f.a,b.r,b.j,b.e,b.b,b.i,b.d],encapsulation:2}),t})();var S=i("yCMK"),A=i("8Vnw");const j=[{path:"",component:L}];let k=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},providers:[l],imports:[[r.b,S.a,b.n,A.a,s.i.forChild(j)]]}),t})()}}]);