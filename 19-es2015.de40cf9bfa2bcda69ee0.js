(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{pfY6:function(t,e,i){"use strict";i.r(e),i.d(e,"ProductAddModule",(function(){return _}));var a=i("ofXK"),o=i("3Pt+"),r=i("tyNb"),n=i("Vr6k"),d=i("PCNd"),c=i("fXoL"),s=i("xBEw"),b=i("nhC3"),l=i("Chay"),p=i("HOh6"),u=i("UaFz"),h=i("/SVk"),m=i("ZOsW"),f=i("bEYa");function g(t,e){1&t&&(c.Pb(0,"div",45),c.Kb(1,"div",46),c.Ob())}function v(t,e){1&t&&c.Kb(0,"i",47)}function P(t,e){1&t&&c.Kb(0,"i",48)}const O=function(){return["/product"]};let y=(()=>{class t{constructor(t,e,i,a,r,n){this.router=t,this.activatedRoute=e,this.fb=i,this.location=a,this.dropdownService=r,this.productService=n,this.loadingState=!1,this.editImageUrl=null,this.showLoader=!1,this.formErrors={name:null,apierror:null},this.isEditing=!1,this.editId=null,this.brandList=[],this.categoryList=[],this.doc={type:"doc",content:[{type:"heading",attrs:{level:3},content:[{type:"text",text:"Hello"}]},{type:"paragraph",content:[{type:"text",text:"This is editable text. You can focus it and start typing."}]},{type:"heading",attrs:{level:3},content:[{type:"text",text:"The code block is a code editor"}]},{type:"paragraph",content:[{type:"text",text:"This editor has been wired up to render code blocks as instances of the "},{type:"text",marks:[{type:"link",attrs:{href:"http://codemirror.net",title:null}}],text:"CodeMirror"},{type:"text",text:" code editor, which provides syntax highlighting, auto-indentation, and similar."}]},{type:"code_block",content:[{type:"text",text:"function max(a, b) {\n  return a > b ? a : b\n}"}]},{type:"paragraph",content:[{type:"text",text:"The content of the code editor is kept in sync with the content of the code block in the rich text editor, so that it is as if you're directly editing the outer document, using a more convenient interface."}]}]},this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id"),this.editObject()),this.addForm=i.group({name:[null,o.p.compose([o.p.required])],product_info:[null],product_detail:[this.doc],price:[null,o.p.compose([o.p.required])],category_id:[null,o.p.compose([o.p.required])],brand_id:[null,o.p.compose([o.p.required])]})}ngOnInit(){this.getCategoryList()}getCategoryList(){this.loadingState=!0,this.dropdownService.getCategoryDrp().subscribe(t=>{this.loadingState=!1,t.success&&(this.categoryList=t.data?t.data:[])})}getBrandList(t){this.loadingState=!0;const e={};this.addForm.value.category_id&&(t&&this.addForm.patchValue({brand_id:""}),e.category_id=this.addForm.value.category_id),this.dropdownService.getBrandDrp(e).subscribe(t=>{this.loadingState=!1,t.success&&(this.brandList=t.data?t.data:[])})}editObject(){this.loadingState=!0,this.productService.getProductById(this.editId).subscribe(t=>{this.loadingState=!1,t.data&&(this.editImageUrl=t.data.image,this.addForm.patchValue({name:t.data.name,price:t.data.price,category_id:JSON.parse(t.data.category_id).value,brand_id:JSON.parse(t.data.brand_id).value,product_info:t.data.product_info,product_detail:t.data.product_detail?JSON.parse(t.data.product_detail):""}),this.getBrandList(!1))},t=>{this.loadingState=!1,this.back()})}fileChangeEvent(t){if(!t.target.files[0].name.match(/(.*?)\.(jpg|jpeg|png|gif|giff)$/))return swal.fire("Invalid File!","Please select valid file ","error"),this.removeFile(),!1;this.removeFile(),this.selectedFile=t.target.files[0]}removeFile(){this.selectedFile=null}submitForm(t){if(console.log(t.value.product_detail),console.log("formData",t.value),this.addForm.valid){this.showLoader=!0;const e=new FormData;e.append("name",t.value.name),e.append("price",t.value.price),e.append("category_id",t.value.category_id),e.append("brand_id",t.value.brand_id),e.append("product_detail",JSON.stringify(t.value.product_detail)),e.append("product_info",t.value.product_info),this.selectedFile&&e.append("file",this.selectedFile),console.log("formData",e),this.isEditing?this.productService.editProduct(this.editId,e).subscribe(t=>{this.showLoader=!1,t.success?this.back():(this.showLoader=!1,t.error.map(t=>{t.hasOwnProperty("name")&&(this.formErrors.name=t.name)}))}):this.productService.addProduct(e).subscribe(t=>{this.showLoader=!1,t.success?this.back():(this.showLoader=!1,t.error.map(t=>{t.hasOwnProperty("name")&&(this.formErrors.name=t.name)}))})}}back(){this.location.back()}}return t.\u0275fac=function(e){return new(e||t)(c.Jb(r.e),c.Jb(r.a),c.Jb(o.c),c.Jb(a.g),c.Jb(s.a),c.Jb(b.a))},t.\u0275cmp=c.Db({type:t,selectors:[["app-product-add"]],decls:75,vars:18,consts:[[3,"show"],[1,"content"],[1,"page-header"],[1,"d-flex","align-items-center"],[1,"mr-auto","p-3"],[1,"page-content","container-fluid"],["class","lorder-wrap",4,"ngIf"],[1,"card","card-tabs","strache-card"],["role","form",3,"formGroup","ngSubmit"],[1,"card-body","p-25","p-l-30","p-r-30"],[1,"d-flex"],[1,"left-form-content","m-l-20","m-r-40"],[1,"clearfix"],["data-provides","fileinput",1,"fileinput","text-center","fileinput-new"],[1,"btn-file","mt-3"],[1,"thumbnail","fileinput-new","rounded-circle",2,"width","150px","height","150px"],["alt","",3,"src"],[1,"fileinput-new","btn","btn-secondary","btn-sm","btn-file","mt-3"],["accept","image/x-png,image/jpeg","type","file","file-model","myFile",3,"change"],[1,"fileinput-preview","fileinput-exists","thumbnail","rounded-circle",2,"width","150px","height","150px"],[1,"text-center"],["data-dismiss","fileinput",1,"btn","btn-link","btn-sm","fileinput-exists","mt-3",3,"click"],[1,"clearfix","mt-3"],[1,"upload-img-label","text-muted","font-size-12"],[1,"row","flex"],[1,"col-xl-12",2,"margin-left","25px"],[1,"form-row","mr-5"],[1,"col-sm-6"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],["number","","type","text",1,"form-control",3,"formControl"],[1,"col-sm-12"],["bindLabel","label","bindValue","value","placeholder","-- Select a Category --",3,"formControl","items","change"],["bindLabel","label","bindValue","value","placeholder","-- Select a Brand --",3,"formControl","items"],[1,"input-group"],["rows","3",1,"form-control",3,"formControl"],[3,"formControl"],[1,"card-footer","text-right"],[1,"btn-list"],["type","button",1,"btn","btn-outline-secondary","btn-rounded",3,"routerLink"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-outline-success","btn-rounded",3,"disabled"],["class","fas fa-check",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"lorder-wrap"],[1,"loader"],[1,"fas","fa-check"],[1,"fa","fa-spinner","fa-spin"]],template:function(t,e){1&t&&(c.Kb(0,"loder",0),c.Pb(1,"div",1),c.Pb(2,"header",2),c.Pb(3,"div",3),c.Pb(4,"div",4),c.Pb(5,"h1"),c.vc(6),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(7,"section",5),c.tc(8,g,2,0,"div",6),c.Pb(9,"div",7),c.Pb(10,"form",8),c.Xb("ngSubmit",(function(){return e.submitForm(e.addForm)})),c.Pb(11,"div",9),c.Pb(12,"div",10),c.Pb(13,"div",11),c.Pb(14,"div",12),c.Pb(15,"div",13),c.Pb(16,"div",14),c.Pb(17,"div",15),c.Kb(18,"img",16),c.Ob(),c.Kb(19,"div",12),c.Pb(20,"button",17),c.vc(21," Browse Image "),c.Ob(),c.Pb(22,"input",18),c.Xb("change",(function(t){return e.fileChangeEvent(t)})),c.Ob(),c.Kb(23,"div",19),c.Ob(),c.Pb(24,"div",20),c.Pb(25,"a",21),c.Xb("click",(function(){return e.removeFile()})),c.vc(26,"Remove"),c.Ob(),c.Ob(),c.Pb(27,"div",22),c.Pb(28,"p",23),c.vc(29,"*Recommended Size: "),c.Kb(30,"br"),c.vc(31,"Minimum 250 * 250"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(32,"div",24),c.Pb(33,"div",25),c.Pb(34,"div",26),c.Pb(35,"div",27),c.Pb(36,"div",28),c.Pb(37,"label",29),c.vc(38,"Name"),c.Ob(),c.Kb(39,"input",30),c.Ob(),c.Ob(),c.Pb(40,"div",27),c.Pb(41,"div",28),c.Pb(42,"label",29),c.vc(43,"Price"),c.Ob(),c.Kb(44,"input",31),c.Ob(),c.Ob(),c.Ob(),c.Pb(45,"div",26),c.Pb(46,"div",32),c.Pb(47,"div",28),c.Pb(48,"label",29),c.vc(49,"Category"),c.Ob(),c.Pb(50,"ng-select",33),c.Xb("change",(function(){return e.getBrandList(!0)})),c.Ob(),c.Ob(),c.Ob(),c.Pb(51,"div",32),c.Pb(52,"div",28),c.Pb(53,"label",29),c.vc(54,"Brand"),c.Ob(),c.Kb(55,"ng-select",34),c.Ob(),c.Ob(),c.Pb(56,"div",32),c.Pb(57,"div",28),c.Pb(58,"label",29),c.vc(59,"Product Information"),c.Ob(),c.Pb(60,"div",35),c.Kb(61,"textarea",36),c.Ob(),c.Ob(),c.Ob(),c.Pb(62,"div",32),c.Pb(63,"label",29),c.vc(64,"Product Details"),c.Ob(),c.Kb(65,"ngx-editor",37),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Pb(66,"div",38),c.Pb(67,"div",39),c.Pb(68,"button",40),c.Kb(69,"i",41),c.vc(70," Cancel"),c.Ob(),c.Pb(71,"button",42),c.tc(72,v,1,0,"i",43),c.tc(73,P,1,0,"i",44),c.vc(74," Success"),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob(),c.Ob()),2&t&&(c.ec("show",e.loadingState),c.zb(6),c.xc("",e.isEditing?"Update":"Create"," Product"),c.zb(2),c.ec("ngIf",e.loadingState),c.zb(2),c.ec("formGroup",e.addForm),c.zb(8),c.ec("src",e.editImageUrl?e.editImageUrl:"assets/images/demo.png",c.pc),c.zb(21),c.ec("formControl",e.addForm.controls.name),c.zb(5),c.ec("formControl",e.addForm.controls.price),c.zb(6),c.ec("formControl",e.addForm.controls.category_id)("items",e.categoryList),c.zb(5),c.ec("formControl",e.addForm.controls.brand_id)("items",e.brandList),c.zb(6),c.ec("formControl",e.addForm.controls.product_info),c.zb(4),c.ec("formControl",e.addForm.controls.product_detail),c.zb(3),c.ec("routerLink",c.gc(17,O)),c.zb(3),c.ec("disabled",e.showLoader),c.zb(1),c.ec("ngIf",!e.showLoader),c.zb(1),c.ec("ngIf",e.showLoader))},directives:[l.a,a.k,o.r,o.j,p.a,o.e,o.b,o.i,o.d,u.a,h.a,m.a,f.a,r.f],encapsulation:2}),t})();var x=i("yCMK");const w=[{path:"",component:y}];let _=(()=>{class t{}return t.\u0275mod=c.Hb({type:t}),t.\u0275inj=c.Gb({factory:function(e){return new(e||t)},imports:[[a.b,o.f,m.b,o.n,r.i.forChild(w),n.a,d.a,x.a,f.b]]}),t})()}}]);