(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{pfY6:function(e,t,i){"use strict";i.r(t),i.d(t,"ProductAddModule",(function(){return F}));var a=i("ofXK"),r=i("3Pt+"),o=i("tyNb"),n=i("Vr6k"),d=i("PCNd"),s=i("fXoL"),b=i("xBEw"),c=i("nhC3"),l=i("Chay"),u=i("HOh6"),p=i("UaFz"),m=i("/SVk"),h=i("ZOsW");function f(e,t){1&e&&(s.Pb(0,"div",42),s.Kb(1,"div",43),s.Ob())}function g(e,t){1&e&&s.Kb(0,"i",44)}function v(e,t){1&e&&s.Kb(0,"i",45)}const P=function(){return["/product"]};let O=(()=>{class e{constructor(e,t,i,a,o,n){this.router=e,this.activatedRoute=t,this.fb=i,this.location=a,this.dropdownService=o,this.productService=n,this.loadingState=!1,this.editImageUrl=null,this.showLoader=!1,this.formErrors={name:null,apierror:null},this.isEditing=!1,this.editId=null,this.brandList=[],this.categoryList=[],this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id"),this.editObject()),this.addForm=i.group({name:[null,r.p.compose([r.p.required])],price:[null,r.p.compose([r.p.required])],category_id:[null,r.p.compose([r.p.required])],brand_id:[null,r.p.compose([r.p.required])]})}ngOnInit(){this.getCategoryList()}getCategoryList(){this.loadingState=!0,this.dropdownService.getCategoryDrp().subscribe(e=>{this.loadingState=!1,e.success&&(this.categoryList=e.data?e.data:[])})}getBrandList(e){this.loadingState=!0;const t={};this.addForm.value.category_id&&(e&&this.addForm.patchValue({brand_id:""}),t.category_id=this.addForm.value.category_id),this.dropdownService.getBrandDrp(t).subscribe(e=>{this.loadingState=!1,e.success&&(this.brandList=e.data?e.data:[])})}editObject(){this.loadingState=!0,this.productService.getProductById(this.editId).subscribe(e=>{this.loadingState=!1,e.data&&(this.editImageUrl=e.data.image,this.addForm.patchValue({name:e.data.name,price:e.data.price,category_id:e.data.category_id,brand_id:e.data.brand_id}),this.getBrandList(!1))},e=>{this.loadingState=!1,this.back()})}fileChangeEvent(e){if(!e.target.files[0].name.match(/(.*?)\.(jpg|jpeg|png|gif|giff)$/))return swal.fire("Invalid File!","Please select valid file ","error"),this.removeFile(),!1;this.removeFile(),this.selectedFile=e.target.files[0]}removeFile(){this.selectedFile=null}submitForm(e){if(this.addForm.valid){this.showLoader=!0;const t=new FormData;t.append("name",e.value.name),t.append("price",e.value.price),t.append("category_id",e.value.category_id),t.append("brand_id",e.value.brand_id),this.selectedFile&&t.append("file",this.selectedFile),this.isEditing?this.productService.editProduct(this.editId,t).subscribe(e=>{this.showLoader=!1,e.success?this.back():(this.showLoader=!1,e.error.map(e=>{e.hasOwnProperty("name")&&(this.formErrors.name=e.name)}))}):this.productService.addProduct(t).subscribe(e=>{this.showLoader=!1,e.success?this.back():(this.showLoader=!1,e.error.map(e=>{e.hasOwnProperty("name")&&(this.formErrors.name=e.name)}))})}}back(){this.location.back()}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(o.e),s.Jb(o.a),s.Jb(r.c),s.Jb(a.g),s.Jb(b.a),s.Jb(c.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-product-add"]],decls:65,vars:16,consts:[[3,"show"],[1,"content"],[1,"page-header"],[1,"d-flex","align-items-center"],[1,"mr-auto","p-3"],[1,"page-content","container-fluid"],["class","lorder-wrap",4,"ngIf"],[1,"card","card-tabs","strache-card"],["role","form",3,"formGroup","ngSubmit"],[1,"card-body","p-25","p-l-30","p-r-30"],[1,"d-flex"],[1,"left-form-content","m-l-20","m-r-40"],[1,"clearfix"],["data-provides","fileinput",1,"fileinput","text-center","fileinput-new"],[1,"btn-file","mt-3"],[1,"thumbnail","fileinput-new","rounded-circle",2,"width","150px","height","150px"],["alt","",3,"src"],[1,"fileinput-new","btn","btn-secondary","btn-sm","btn-file","mt-3"],["accept","image/x-png,image/jpeg","type","file","file-model","myFile",3,"change"],[1,"fileinput-preview","fileinput-exists","thumbnail","rounded-circle",2,"width","150px","height","150px"],[1,"text-center"],["data-dismiss","fileinput",1,"btn","btn-link","btn-sm","fileinput-exists","mt-3",3,"click"],[1,"clearfix","mt-3"],[1,"upload-img-label","text-muted","font-size-12"],[1,"row","flex"],[1,"col-xl-12",2,"margin-left","25px"],[1,"form-row"],[1,"col-sm-6"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],["number","","type","text",1,"form-control",3,"formControl"],[1,"col-sm-12"],["bindLabel","label","bindValue","value","placeholder","-- Select a Category --",3,"formControl","items","change"],["bindLabel","label","bindValue","value","placeholder","-- Select a Brand --",3,"formControl","items"],[1,"card-footer","text-right"],[1,"btn-list"],["type","button",1,"btn","btn-outline-secondary","btn-rounded",3,"routerLink"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-outline-success","btn-rounded",3,"disabled"],["class","fas fa-check",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"lorder-wrap"],[1,"loader"],[1,"fas","fa-check"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(s.Kb(0,"loder",0),s.Pb(1,"div",1),s.Pb(2,"header",2),s.Pb(3,"div",3),s.Pb(4,"div",4),s.Pb(5,"h1"),s.uc(6),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(7,"section",5),s.sc(8,f,2,0,"div",6),s.Pb(9,"div",7),s.Pb(10,"form",8),s.Xb("ngSubmit",(function(){return t.submitForm(t.addForm)})),s.Pb(11,"div",9),s.Pb(12,"div",10),s.Pb(13,"div",11),s.Pb(14,"div",12),s.Pb(15,"div",13),s.Pb(16,"div",14),s.Pb(17,"div",15),s.Kb(18,"img",16),s.Ob(),s.Kb(19,"div",12),s.Pb(20,"button",17),s.uc(21," Browse Image "),s.Ob(),s.Pb(22,"input",18),s.Xb("change",(function(e){return t.fileChangeEvent(e)})),s.Ob(),s.Kb(23,"div",19),s.Ob(),s.Pb(24,"div",20),s.Pb(25,"a",21),s.Xb("click",(function(){return t.removeFile()})),s.uc(26,"Remove"),s.Ob(),s.Ob(),s.Pb(27,"div",22),s.Pb(28,"p",23),s.uc(29,"*Recommended Size: "),s.Kb(30,"br"),s.uc(31,"Minimum 250 * 250"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(32,"div",24),s.Pb(33,"div",25),s.Pb(34,"div",26),s.Pb(35,"div",27),s.Pb(36,"div",28),s.Pb(37,"label",29),s.uc(38,"Name"),s.Ob(),s.Kb(39,"input",30),s.Ob(),s.Ob(),s.Pb(40,"div",27),s.Pb(41,"div",28),s.Pb(42,"label",29),s.uc(43,"Price"),s.Ob(),s.Kb(44,"input",31),s.Ob(),s.Ob(),s.Ob(),s.Pb(45,"div",26),s.Pb(46,"div",32),s.Pb(47,"div",28),s.Pb(48,"label",29),s.uc(49,"Category"),s.Ob(),s.Pb(50,"ng-select",33),s.Xb("change",(function(){return t.getBrandList(!0)})),s.Ob(),s.Ob(),s.Ob(),s.Pb(51,"div",32),s.Pb(52,"div",28),s.Pb(53,"label",29),s.uc(54,"Brand"),s.Ob(),s.Kb(55,"ng-select",34),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(56,"div",35),s.Pb(57,"div",36),s.Pb(58,"button",37),s.Kb(59,"i",38),s.uc(60," Cancel"),s.Ob(),s.Pb(61,"button",39),s.sc(62,g,1,0,"i",40),s.sc(63,v,1,0,"i",41),s.uc(64," Success"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.ec("show",t.loadingState),s.zb(6),s.wc("",t.isEditing?"Update":"Create"," Product"),s.zb(2),s.ec("ngIf",t.loadingState),s.zb(2),s.ec("formGroup",t.addForm),s.zb(8),s.ec("src",t.editImageUrl?t.editImageUrl:"assets/images/demo.png",s.pc),s.zb(21),s.ec("formControl",t.addForm.controls.name),s.zb(5),s.ec("formControl",t.addForm.controls.price),s.zb(6),s.ec("formControl",t.addForm.controls.category_id)("items",t.categoryList),s.zb(5),s.ec("formControl",t.addForm.controls.brand_id)("items",t.brandList),s.zb(3),s.ec("routerLink",s.gc(15,P)),s.zb(3),s.ec("disabled",t.showLoader),s.zb(1),s.ec("ngIf",!t.showLoader),s.zb(1),s.ec("ngIf",t.showLoader))},directives:[l.a,a.k,r.r,r.j,u.a,r.e,r.b,r.i,r.d,p.a,m.a,h.a,o.f],encapsulation:2}),e})();var w=i("yCMK");const y=[{path:"",component:O}];let F=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[a.b,r.f,h.b,r.n,o.i.forChild(y),n.a,d.a,w.a]]}),e})()}}]);