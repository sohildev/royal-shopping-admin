(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{PSbb:function(e,o,r){"use strict";r.r(o),r.d(o,"AddCompanyModule",(function(){return S}));var t=r("ofXK"),n=r("3Pt+"),a=r("tyNb"),i=r("Lw2Y"),s=r("fXoL"),b=r("AwSQ"),m=r("8cFx"),c=r("Q05f"),d=r("Chay"),p=r("HOh6"),l=r("UaFz"),h=r("/SVk");function u(e,o){1&e&&(s.Pb(0,"div",30),s.Kb(1,"div",31),s.Ob())}function f(e,o){1&e&&s.Kb(0,"i",32)}function y(e,o){1&e&&s.Kb(0,"i",33)}const O=function(){return["/company"]};let P=(()=>{class e{constructor(e,o,r,t,a,s){this.router=e,this.activatedRoute=o,this.fb=r,this.dataService=t,this.commonService=a,this.companyService=s,this.loadingState=!1,this.showLoader=!1,this.formErrors={email:null,name:null,phone_number:null,apierror:null},this.isEditing=!1,this.editId=null,this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id"),this.editObject()),this.companyForm=r.group({email:[null,n.p.compose([n.p.required,i.e])],name:[null,n.p.compose([n.p.required])],phone_number:[null,n.p.compose([n.p.required,n.p.minLength(8),n.p.maxLength(15)])],address:[""]})}ngOnInit(){}editObject(){this.loadingState=!0,this.companyService.getCompanyById(this.editId,{admin:!0}).subscribe(e=>{this.loadingState=!1,e.data&&this.companyForm.patchValue({email:e.data.email,name:e.data.name,phone_number:e.data.phone_number,address:e.data.address})},e=>{this.loadingState=!1,this.router.navigateByUrl("/company")})}submitForm(){if(this.companyForm.valid){this.showLoader=!0;const e={email:this.companyForm.value.email.toLowerCase(),phone_number:this.companyForm.value.phone_number,name:this.companyForm.value.name,address:this.companyForm.value.address};this.isEditing?this.companyService.editCompany(this.editId,e).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/company"):(this.showLoader=!1,e.error.map(e=>{e.hasOwnProperty("email")&&(this.formErrors.email=e.email),e.hasOwnProperty("phone_number")&&(this.formErrors.phone_number=e.phone_number),e.hasOwnProperty("name")||e.hasOwnProperty("phone_number")||e.hasOwnProperty("email")||(this.formErrors.apierror=e)}))}):this.companyService.addCompany(e).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/company"):(this.showLoader=!1,e.error.map(e=>{e.hasOwnProperty("email")&&(this.formErrors.email=e.email),e.hasOwnProperty("phone_number")&&(this.formErrors.phone_number=e.phone_number),e.hasOwnProperty("company_name")||e.hasOwnProperty("email")||e.hasOwnProperty("phone_number")||(this.formErrors.apierror=e)}))})}}}return e.\u0275fac=function(o){return new(o||e)(s.Jb(a.e),s.Jb(a.a),s.Jb(n.c),s.Jb(b.a),s.Jb(m.a),s.Jb(c.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-add-company"]],decls:51,vars:13,consts:[[3,"show"],[1,"content"],[1,"page-header"],[1,"d-flex","align-items-center"],[1,"mr-auto","p-3"],[1,"page-content","container-fluid"],["class","lorder-wrap",4,"ngIf"],[1,"card","card-tabs","strache-card"],["role","form",3,"formGroup","ngSubmit"],[1,"card-body","p-l-30","p-r-30"],[1,"row"],[1,"col-xl-8"],[1,"mb-4","mt-1","font-weight-600","text-dark"],[1,"form-row"],[1,"col-sm-6"],[1,"form-group"],[1,"control-label"],["type","text",1,"form-control",3,"formControl"],[1,"input-group"],["placeholder","Code","value","+91","type","text","disabled","",1,"form-control",2,"flex","none !important","width","70px"],["number","","type","text","numbersOnly","",1,"form-control",3,"formControl"],[1,"col-sm-12"],["rows","2",1,"form-control",3,"formControl"],[1,"card-footer","text-right"],[1,"btn-list"],["type","button",1,"btn","btn-outline-secondary","btn-rounded",3,"routerLink"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-outline-success","btn-rounded",3,"disabled"],["class","fas fa-check",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"lorder-wrap"],[1,"loader"],[1,"fas","fa-check"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,o){1&e&&(s.Kb(0,"loder",0),s.Pb(1,"div",1),s.Pb(2,"header",2),s.Pb(3,"div",3),s.Pb(4,"div",4),s.Pb(5,"h1"),s.uc(6),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(7,"section",5),s.sc(8,u,2,0,"div",6),s.Pb(9,"div",7),s.Pb(10,"form",8),s.Xb("ngSubmit",(function(){return o.submitForm()})),s.Pb(11,"div",9),s.Pb(12,"div",10),s.Pb(13,"div",11),s.Pb(14,"h5",12),s.uc(15,"Company Details"),s.Ob(),s.Pb(16,"div",13),s.Pb(17,"div",14),s.Pb(18,"div",15),s.Pb(19,"label",16),s.uc(20,"Name"),s.Ob(),s.Kb(21,"input",17),s.Ob(),s.Ob(),s.Pb(22,"div",14),s.Pb(23,"div",15),s.Pb(24,"label",16),s.uc(25,"Email"),s.Ob(),s.Kb(26,"input",17),s.Ob(),s.Ob(),s.Ob(),s.Pb(27,"div",13),s.Pb(28,"div",14),s.Pb(29,"div",15),s.Pb(30,"label",16),s.uc(31,"Phone No"),s.Ob(),s.Pb(32,"div",18),s.Kb(33,"input",19),s.Kb(34,"input",20),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(35,"div",13),s.Pb(36,"div",21),s.Pb(37,"div",15),s.Pb(38,"label",16),s.uc(39,"Address"),s.Ob(),s.Pb(40,"div",18),s.Kb(41,"textarea",22),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Pb(42,"div",23),s.Pb(43,"div",24),s.Pb(44,"button",25),s.Kb(45,"i",26),s.uc(46," Cancel"),s.Ob(),s.Pb(47,"button",27),s.sc(48,f,1,0,"i",28),s.sc(49,y,1,0,"i",29),s.uc(50," Success"),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob(),s.Ob()),2&e&&(s.ec("show",o.loadingState),s.zb(6),s.wc("",o.isEditing?"Update":"Create"," Company"),s.zb(2),s.ec("ngIf",o.loadingState),s.zb(2),s.ec("formGroup",o.companyForm),s.zb(11),s.ec("formControl",o.companyForm.controls.name),s.zb(5),s.ec("formControl",o.companyForm.controls.email),s.zb(8),s.ec("formControl",o.companyForm.controls.phone_number),s.zb(7),s.ec("formControl",o.companyForm.controls.address),s.zb(3),s.ec("routerLink",s.gc(12,O)),s.zb(3),s.ec("disabled",o.showLoader),s.zb(1),s.ec("ngIf",!o.showLoader),s.zb(1),s.ec("ngIf",o.showLoader))},directives:[d.a,t.k,n.r,n.j,p.a,n.e,n.b,n.i,n.d,l.a,h.a,a.f],encapsulation:2}),e})();var v=r("Vr6k"),w=r("PCNd"),g=r("yCMK");const C=[{path:"",component:P,data:{title:"add_company"}}];let S=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(o){return new(o||e)},imports:[[t.b,n.f,n.n,a.i.forChild(C),v.a,w.a,g.a]]}),e})()}}]);