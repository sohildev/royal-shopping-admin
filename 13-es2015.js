(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"7ylv":function(e,t,r){"use strict";r.r(t),r.d(t,"OfferProductAddModule",(function(){return _}));var i=r("ofXK"),o=r("3Pt+"),d=r("tyNb"),s=r("Vr6k"),a=r("PCNd"),n=r("fXoL"),c=r("nhC3"),b=r("Chay"),l=r("HOh6"),u=r("ZOsW"),f=r("UaFz"),p=r("/SVk");function h(e,t){1&e&&(n.Pb(0,"div",27),n.Kb(1,"div",28),n.Ob())}function m(e,t){1&e&&n.Kb(0,"i",29)}function v(e,t){1&e&&n.Kb(0,"i",30)}const g=function(){return["/offer-product"]};let P=(()=>{class e{constructor(e,t,r,i){this.router=e,this.activatedRoute=t,this.fb=r,this.ProductService=i,this.loadingState=!1,this.editImageUrl=null,this.offerList=[],this.productList=[],this.showLoader=!1,this.formErrors={product_id:null,apierror:null},this.isEditing=!1,this.editId=null,this.activatedRoute.snapshot.paramMap.get("id")&&(this.isEditing=!0,this.editId=this.activatedRoute.snapshot.paramMap.get("id"),this.editObject()),this.addForm=r.group({product_id:[null,o.p.compose([o.p.required])],offer_price:[null,o.p.compose([o.p.required])],vendors_offers_id:[null,o.p.compose([o.p.required])]})}ngOnInit(){}editObject(){this.loadingState=!0,this.ProductService.getOfferProductById(this.editId).subscribe(e=>{this.loadingState=!1,e.data&&(this.editImageUrl=e.data.image,this.addForm.patchValue({product_id:e.data.product_id,offer_price:e.data.offer_price,vendors_offers_id:e.data.vendors_offers_id}))},e=>{this.loadingState=!1,this.router.navigateByUrl("/bankinfo")})}fileChangeEvent(e){if(!e.target.files[0].product_id.match(/(.*?)\.(jpg|jpeg|png|gif|giff)$/))return swal.fire("Invalid File!","Please select valid file ","error"),this.removeFile(),!1;this.removeFile(),this.selectedFile=e.target.files[0]}removeFile(){this.selectedFile=null}submitForm(e){this.addForm.valid&&(this.showLoader=!0,this.isEditing?this.ProductService.editOfferProduct(this.editId,e.value).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/bankinfo"):(this.showLoader=!1,e.error.map(e=>{e.hasOwnProperty("product_id")&&(this.formErrors.product_id=e.product_id)}))}):this.ProductService.addOfferProduct(e.value).subscribe(e=>{this.showLoader=!1,e.success?this.router.navigateByUrl("/bankinfo"):(this.showLoader=!1,e.error.map(e=>{e.hasOwnProperty("product_id")&&(this.formErrors.product_id=e.product_id)}))}))}}return e.\u0275fac=function(t){return new(t||e)(n.Jb(d.e),n.Jb(d.a),n.Jb(o.c),n.Jb(c.a))},e.\u0275cmp=n.Db({type:e,selectors:[["app-offer-product-add"]],decls:41,vars:14,consts:[[3,"show"],[1,"content"],[1,"page-header"],[1,"d-flex","align-items-center"],[1,"mr-auto","p-3"],[1,"page-content","container-fluid"],["class","lorder-wrap",4,"ngIf"],[1,"card","card-tabs","strache-card"],["role","form",3,"formGroup","ngSubmit"],[1,"card-body","p-25","p-l-30","p-r-30"],[1,"d-flex"],[1,"row","flex"],[1,"col-xl-12","mr-2","ml-2"],[1,"form-row"],[1,"col-sm-6","p-2"],[1,"form-group"],[1,"control-label"],["bindLabel","label","bindValue","value","placeholder"," Select a Product ",3,"formControl","items"],["bindLabel","label","bindValue","value","placeholder"," Select a Offer ",3,"formControl","items"],["number","","type","text",1,"form-control",3,"formControl"],[1,"card-footer","text-right"],[1,"btn-list"],["type","button",1,"btn","btn-outline-secondary","btn-rounded",3,"routerLink"],[1,"fas","fa-times"],["type","submit",1,"btn","btn-outline-success","btn-rounded",3,"disabled"],["class","fas fa-check",4,"ngIf"],["class","fa fa-spinner fa-spin",4,"ngIf"],[1,"lorder-wrap"],[1,"loader"],[1,"fas","fa-check"],[1,"fa","fa-spinner","fa-spin"]],template:function(e,t){1&e&&(n.Kb(0,"loder",0),n.Pb(1,"div",1),n.Pb(2,"header",2),n.Pb(3,"div",3),n.Pb(4,"div",4),n.Pb(5,"h1"),n.uc(6),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Pb(7,"section",5),n.sc(8,h,2,0,"div",6),n.Pb(9,"div",7),n.Pb(10,"form",8),n.Xb("ngSubmit",(function(){return t.submitForm(t.addForm)})),n.Pb(11,"div",9),n.Pb(12,"div",10),n.Pb(13,"div",11),n.Pb(14,"div",12),n.Pb(15,"div",13),n.Pb(16,"div",14),n.Pb(17,"div",15),n.Pb(18,"label",16),n.uc(19,"Product"),n.Ob(),n.Kb(20,"ng-select",17),n.Ob(),n.Ob(),n.Pb(21,"div",14),n.Pb(22,"div",15),n.Pb(23,"label",16),n.uc(24,"Offer"),n.Ob(),n.Kb(25,"ng-select",18),n.Ob(),n.Ob(),n.Pb(26,"div",14),n.Pb(27,"div",15),n.Pb(28,"label",16),n.uc(29,"offer Price "),n.Ob(),n.Kb(30,"input",19),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.uc(31,"- "),n.Ob(),n.Ob(),n.Pb(32,"div",20),n.Pb(33,"div",21),n.Pb(34,"button",22),n.Kb(35,"i",23),n.uc(36," Cancel"),n.Ob(),n.Pb(37,"button",24),n.sc(38,m,1,0,"i",25),n.sc(39,v,1,0,"i",26),n.uc(40," Success"),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob(),n.Ob()),2&e&&(n.ec("show",t.loadingState),n.zb(6),n.wc("",t.isEditing?"Update":"Create"," Offer Product"),n.zb(2),n.ec("ngIf",t.loadingState),n.zb(2),n.ec("formGroup",t.addForm),n.zb(10),n.ec("formControl",t.addForm.controls.product_id)("items",t.productList),n.zb(5),n.ec("formControl",t.addForm.controls.vendors_offers_id)("items",t.offerList),n.zb(5),n.ec("formControl",t.addForm.controls.offer_price),n.zb(4),n.ec("routerLink",n.gc(13,g)),n.zb(3),n.ec("disabled",t.showLoader),n.zb(1),n.ec("ngIf",!t.showLoader),n.zb(1),n.ec("ngIf",t.showLoader))},directives:[b.a,i.k,o.r,o.j,l.a,o.e,u.a,o.i,o.d,f.a,o.b,p.a,d.f],encapsulation:2}),e})();var O=r("yCMK");const w=[{path:"",component:P}];let _=(()=>{class e{}return e.\u0275mod=n.Hb({type:e}),e.\u0275inj=n.Gb({factory:function(t){return new(t||e)},imports:[[i.b,o.f,u.b,o.n,d.i.forChild(w),s.a,a.a,O.a]]}),e})()}}]);